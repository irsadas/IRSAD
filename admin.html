<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Admin Dashboard - Irsad Ansari</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Fira+Code:wght@300;400;500;600;700&family=Poppins:wght@300;400;600;700&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="style.css" />
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
      /* Admin Specific Overrides */
      body {
        padding-top: 0; /* Reset hero padding */
        min-height: 100vh;
        display: flex;
        flex-direction: column;
      }
      
      #canvas-bg {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        z-index: -1;
        background: linear-gradient(to bottom right, #f8fafc, #e2e8f0, #cbd5e1);
      }

      .admin-layout {
        display: flex;
        flex: 1;
        margin-top: 80px; /* Space for fixed nav */
        height: calc(100vh - 80px);
      }

      .sidebar {
        width: 250px;
        background: rgba(255, 255, 255, 0.8);
        backdrop-filter: blur(10px);
        border-right: 1px solid var(--glass-border);
        padding: 2rem;
        display: flex;
        flex-direction: column;
        gap: 1rem;
      }

      .sidebar-btn {
        text-align: left;
        background: transparent;
        border: none;
        padding: 1rem;
        border-radius: 10px;
        cursor: pointer;
        color: var(--text-gray);
        font-weight: 600;
        transition: all 0.3s ease;
        display: flex;
        align-items: center;
        gap: 10px;
      }

      .sidebar-btn:hover, .sidebar-btn.active {
        background: var(--primary);
        color: white;
        box-shadow: 0 5px 15px rgba(13, 148, 136, 0.2);
      }

      .admin-content {
        flex: 1;
        padding: 2rem;
        overflow-y: auto;
      }

      .dashboard-card {
        background: rgba(255, 255, 255, 0.6);
        border: 1px solid var(--glass-border);
        border-radius: 15px;
        padding: 2rem;
        margin-bottom: 2rem;
      }

      .admin-table {
        width: 100%;
        border-collapse: collapse;
        margin-top: 1rem;
      }

      .admin-table th, .admin-table td {
        text-align: left;
        padding: 1rem;
        border-bottom: 1px solid rgba(0,0,0,0.05);
      }

      .admin-table th {
        color: var(--primary);
        font-weight: 600;
      }

      .status-badge {
        padding: 0.25rem 0.75rem;
        border-radius: 20px;
        font-size: 0.8rem;
        font-weight: 600;
      }
      .status-new { background: #dcfce7; color: #166534; }
      .status-read { background: #f1f5f9; color: #475569; }

      .tab-content {
        display: none;
        animation: fadeIn 0.5s ease;
      }
      .tab-content.active {
        display: block;
      }

      @keyframes fadeIn {
        from { opacity: 0; transform: translateY(10px); }
        to { opacity: 1; transform: translateY(0); }
      }

      /* Toast Notification */
      .toast {
        visibility: hidden;
        min-width: 250px;
        background: var(--primary);
        color: white;
        text-align: center;
        border-radius: 50px;
        padding: 1rem 2rem;
        position: fixed;
        z-index: 3000;
        left: 50%;
        bottom: 30px;
        transform: translateX(-50%);
        font-size: 1rem;
        font-weight: 600;
        box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        opacity: 0;
        transition: all 0.3s ease;
      }

      .toast.show {
        visibility: visible;
        opacity: 1;
        bottom: 50px;
      }
    </style>
  </head>

  <body>
    <canvas id="canvas-bg"></canvas>

    <!-- ========== NAVIGATION ========== -->
    <nav class="scrolled">
      <a href="index.html" class="nav-brand">
        <span class="logo-symbol">IA</span>
        <span class="logo-text">Admin Panel</span>
      </a>
      <ul class="nav-list">
        <li><a href="index.html">View Site</a></li>
        <li><a href="#" id="logoutBtn" style="color: var(--primary)">Logout</a></li>
      </ul>
    </nav>

    <div class="admin-layout">
      <!-- Sidebar -->
      <aside class="sidebar">
        <button class="sidebar-btn active" onclick="switchTab('overview', this)">üìä Overview</button>
        <button class="sidebar-btn" onclick="switchTab('post-blog', this)">üìù Post Blog</button>
        <button class="sidebar-btn" onclick="switchTab('messages', this)">üí¨ Messages <span style="background:red; color:white; padding:2px 6px; border-radius:50%; font-size:0.7rem; margin-left:auto">2</span></button>
        <button class="sidebar-btn" onclick="switchTab('settings', this)">‚öôÔ∏è Settings</button>
      </aside>

      <!-- Content Area -->
      <main class="admin-content">
        
        <!-- OVERVIEW TAB -->
        <div id="overview" class="tab-content active">
          <h2 class="section-title" style="text-align: left; font-size: 2rem;">Dashboard Overview</h2>
          <div class="dashboard-card">
            <canvas id="visitorChart"></canvas>
          </div>
        </div>

        <!-- POST BLOG TAB -->
        <div id="post-blog" class="tab-content">
          <h2 class="section-title" style="text-align: left; font-size: 2rem;">Create New Post</h2>
          <div class="dashboard-card">
            <form class="contact-form" style="margin: 0; max-width: 100%;">
              <div class="form-group">
                <label>Blog Title</label>
                <input type="text" id="postTitle" class="form-input" placeholder="Enter post title...">
              </div>
              <div class="form-group">
                <label>Category</label>
                <select id="postCategory" class="form-input">
                  <option>Development</option>
                  <option>Design</option>
                  <option>Tutorial</option>
                </select>
              </div>
              <div class="form-group">
                <label>Status</label>
                <select class="form-input">
                  <option value="published">Published</option>
                  <option value="draft">Draft</option>
                </select>
              </div>
              <div class="form-group">
                <label>Content</label>
                <textarea id="postContent" class="form-input" rows="10" placeholder="Write your content here..."></textarea>
              </div>
              <div style="display: flex; gap: 1rem;">
                <button type="button" class="btn btn-secondary" onclick="previewPost()">Preview</button>
                <button type="submit" class="btn btn-primary">Publish Post</button>
              </div>
            </form>
          </div>
        </div>

        <!-- MESSAGES TAB -->
        <div id="messages" class="tab-content">
          <h2 class="section-title" style="text-align: left; font-size: 2rem;">Inbox</h2>
          <div class="dashboard-card">
            <table class="admin-table">
              <thead>
                <tr>
                  <th>From</th>
                  <th>Subject</th>
                  <th>Date</th>
                  <th>Status</th>
                  <th>Action</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>John Doe</td>
                  <td>Project Inquiry for E-commerce</td>
                  <td>Oct 24, 2025</td>
                  <td><span class="status-badge status-new">New</span></td>
                  <td>
                    <button class="btn btn-secondary" style="padding: 0.3rem 1rem; font-size: 0.8rem">View</button>
                    <button class="btn btn-secondary" style="padding: 0.3rem 1rem; font-size: 0.8rem; border-color: #ef4444; color: #ef4444; margin-left: 5px;" onclick="deleteRow(this)">Delete</button>
                  </td>
                </tr>
                <tr>
                  <td>Sarah Smith</td>
                  <td>Collaboration Opportunity</td>
                  <td>Oct 22, 2025</td>
                  <td><span class="status-badge status-read">Read</span></td>
                  <td>
                    <button class="btn btn-secondary" style="padding: 0.3rem 1rem; font-size: 0.8rem">View</button>
                    <button class="btn btn-secondary" style="padding: 0.3rem 1rem; font-size: 0.8rem; border-color: #ef4444; color: #ef4444; margin-left: 5px;" onclick="deleteRow(this)">Delete</button>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>

        <!-- SETTINGS TAB -->
        <div id="settings" class="tab-content">
          <h2 class="section-title" style="text-align: left; font-size: 2rem;">Profile Settings</h2>
          <div class="dashboard-card">
            <form class="contact-form" id="settingsForm" style="margin: 0; max-width: 100%;">
              <div class="form-group">
                <label>Display Name</label>
                <input type="text" class="form-input" value="Irsad Ansari">
              </div>
              <div class="form-group">
                <label>Job Title</label>
                <input type="text" class="form-input" value="Senior Full Stack Developer">
              </div>
              <div class="form-group">
                <label>Email Address</label>
                <input type="email" class="form-input" value="irsadas0786@gmail.com">
              </div>
              <button class="btn btn-primary">Save Changes</button>
            </form>
          </div>
        </div>

      </main>
    </div>

    <script>
      // Simple Tab Switcher Logic
      function switchTab(tabId, btn) {
        // Hide all tabs
        document.querySelectorAll('.tab-content').forEach(tab => {
          tab.classList.remove('active');
        });
        // Deactivate all buttons
        document.querySelectorAll('.sidebar-btn').forEach(btn => {
          btn.classList.remove('active');
        });

        // Show selected tab
        document.getElementById(tabId).classList.add('active');
        // Activate clicked button
        btn.classList.add('active');
      }

      // Delete Row Function
      function deleteRow(btn) {
        if (confirm('Are you sure you want to delete this message?')) {
          const row = btn.closest('tr');
          row.remove();
        }
      }

      // Chart.js Initialization
      const ctxChart = document.getElementById('visitorChart').getContext('2d');
      new Chart(ctxChart, {
        type: 'line',
        data: {
          labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun'],
          datasets: [{
            label: 'Monthly Visitors',
            data: [1200, 1900, 3000, 5000, 4500, 6000],
            borderColor: '#0d9488',
            backgroundColor: 'rgba(13, 148, 136, 0.1)',
            borderWidth: 2,
            fill: true,
            tension: 0.4
          }]
        },
        options: {
          responsive: true,
          plugins: {
            legend: { position: 'top' },
            title: { display: true, text: 'Website Traffic Growth' }
          },
          scales: {
            y: { beginAtZero: true }
          }
        }
      });

      // Particle Background (Reused from script.js logic)
      const canvas = document.getElementById("canvas-bg");
      const ctx = canvas.getContext("2d");
      canvas.width = window.innerWidth;
      canvas.height = window.innerHeight;
      
      let particlesArray;
      class Particle {
        constructor() {
          this.x = Math.random() * canvas.width;
          this.y = Math.random() * canvas.height;
          this.directionX = (Math.random() * 0.4) - 0.2;
          this.directionY = (Math.random() * 0.4) - 0.2;
          this.size = Math.random() * 2;
          this.color = '#0d9488';
        }
        update() {
          if (this.x > canvas.width || this.x < 0) this.directionX = -this.directionX;
          if (this.y > canvas.height || this.y < 0) this.directionY = -this.directionY;
          this.x += this.directionX;
          this.y += this.directionY;
          this.draw();
        }
        draw() {
          ctx.beginPath();
          ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2, false);
          ctx.fillStyle = this.color;
          ctx.fill();
        }
      }
      function init() {
        particlesArray = [];
        let numberOfParticles = (canvas.height * canvas.width) / 15000;
        for (let i = 0; i < numberOfParticles; i++) particlesArray.push(new Particle());
      }
      function animate() {
        requestAnimationFrame(animate);
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        for (let i = 0; i < particlesArray.length; i++) particlesArray[i].update();
      }
      init();
      animate();
      
      window.addEventListener('resize', () => {
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;
        init();
      });

      // Logout Modal Logic
      const logoutBtn = document.getElementById('logoutBtn');
      const logoutModal = document.getElementById('logoutModal');
      const cancelLogout = document.getElementById('cancelLogout');
      const confirmLogout = document.getElementById('confirmLogout');

      if (logoutBtn) {
        logoutBtn.addEventListener('click', (e) => {
          e.preventDefault();
          logoutModal.classList.add('show');
        });
      }

      if (cancelLogout) {
        cancelLogout.addEventListener('click', () => {
          logoutModal.classList.remove('show');
        });
      }

      if (confirmLogout) {
        confirmLogout.addEventListener('click', () => {
          window.location.href = 'index.html';
        });
      }

      window.addEventListener('click', (e) => {
        if (e.target == logoutModal) {
          logoutModal.classList.remove('show');
        }
        if (e.target == document.getElementById('previewModal')) {
          document.getElementById('previewModal').classList.remove('show');
        }
      });

      // Settings Toast Logic
      const settingsForm = document.getElementById('settingsForm');
      const toast = document.getElementById('toast');

      if (settingsForm) {
        settingsForm.addEventListener('submit', (e) => {
          e.preventDefault();
          showToast();
        });
      }

      function showToast() {
        toast.classList.add("show");
        setTimeout(function(){ toast.classList.remove("show"); }, 3000);
      }

      // Preview Post Logic
      const previewModal = document.getElementById('previewModal');
      const closePreviewModal = document.getElementById('closePreviewModal');

      function previewPost() {
        const title = document.getElementById('postTitle').value;
        const category = document.getElementById('postCategory').value;
        const content = document.getElementById('postContent').value;

        document.getElementById('previewTitle').textContent = title || "Untitled Post";
        document.getElementById('previewCategory').textContent = category;
        document.getElementById('previewContent').textContent = content || "No content...";

        previewModal.classList.add('show');
      }

      if (closePreviewModal) {
        closePreviewModal.addEventListener('click', () => {
          previewModal.classList.remove('show');
        });
      }
    </script>

    <!-- ========== LOGOUT MODAL ========== -->
    <div id="logoutModal" class="modal">
      <div class="modal-content" style="max-width: 400px; text-align: center;">
        <h2 style="margin-bottom: 1rem;">Confirm Logout</h2>
        <p style="margin-bottom: 1.5rem; color: var(--text-gray);">Are you sure you want to log out?</p>
        <div style="display: flex; gap: 1rem; justify-content: center;">
          <button id="cancelLogout" class="btn btn-secondary" style="flex: 1;">Cancel</button>
          <button id="confirmLogout" class="btn btn-primary" style="flex: 1;">Logout</button>
        </div>
      </div>
    </div>

    <!-- ========== TOAST NOTIFICATION ========== -->
    <div id="toast" class="toast">Settings Saved Successfully!</div>

    <!-- ========== PREVIEW MODAL ========== -->
    <div id="previewModal" class="modal">
      <div class="modal-content" style="max-width: 800px; text-align: left;">
        <span class="close-modal" id="closePreviewModal">&times;</span>
        <div class="modal-header">
          <h2 id="previewTitle" style="margin: 0;">Post Title</h2>
        </div>
        <div class="modal-body">
          <div style="margin-bottom: 1rem;">
            <span class="status-badge status-read" id="previewCategory" style="background: var(--primary); color: white;">Category</span>
          </div>
          <div id="previewContent" style="white-space: pre-wrap; color: var(--text-gray);">Post content...</div>
        </div>
        <div class="modal-footer">
          <button class="btn btn-secondary" onclick="document.getElementById('previewModal').classList.remove('show')">Close</button>
        </div>
      </div>
    </div>
  </body>
</html>